{% extends 'public/base.html' %}

{% block body %}
<form class="form-horizontal" id="groupEditForm">
    <div class="row">
        <div class="col-sm-12">
            <p class="alert-info text-center" style="margin: -10px -15px 10px;">
                基础信息
            </p>
            <div class="col-sm-6">
                <input type="hidden" name="gid" value="{{ groupInfo.id }}"/>
                <div class="form-group">
                    <label class="col-sm-3 control-label">组名：</label>
                    <div class="col-sm-8">
                        <input id="group_name" name="group_name" class="form-control" type="text" value="{{ groupInfo.name }}" required placeholder="请填写用户组名称">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">排序：</label>
                    <div class="col-sm-8">
                        <input id="sort" name="sort" class="form-control" type="digits" value="{{ groupInfo.sort }}" placeholder="请填入排序数字">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3 control-label">状态：</label>
                    <div class="col-sm-8">
                        <div class="switch">
                            <div class="radio radio-info radio-inline">
                                <input type="radio" id="status_off" value="1" name="status" {% if groupInfo.status=='1' %} checked {% endif %}>
                                <label for="status_off">启用</label>
                            </div>
                            <div class="radio radio-danger radio-inline">
                                <input type="radio" id="status_on" value="0" name="status" {% if groupInfo.status=='0' %} checked {% endif %}>
                                <label for="status_on">禁用</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">描述：</label>
                    <div class="col-sm-8">
                        <textarea name="description" class="form-control" placeholder="用户组描述">{{ groupInfo.description }}</textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="row">
        <div class="col-sm-12">
            <p class="alert-warning text-center" style="margin: -10px -15px 10px;">
                权限分配
            </p>

            <div style="height: 300px; overflow-y: auto;">
                {% for k, policyList in policies if policyList|length > 0 %}
                <fieldset>
                    <legend>{{ categories[k|lower] is defined ? categories[k|lower] : k|lower }}</legend>
                    {% for policy in policyList %}
                    <div class="col-xs-4">
                        <input type="checkbox" name="policies[]" value="{{ policy.label }}" id="policy_{{ policy.label }}" {% if policy.label in groupInfo.policies %}checked="checked"{% endif %}/>
                        <label for="policy_{{ policy.label }}">{{ policy.description }}</label>
                    </div>
                    {% endfor %}
                </fieldset>
                {% endfor %}
            </div>
        </div>
    </div>
</form>

<div class="text-center">
    <button class="btn btn-outline btn-info" type="button" id="saveGroupBtn">
        <i class="fa fa-check"></i>提交
    </button>
    <button class="btn btn-outline btn-default" onclick="bootbox.hideAll();">
        <i class="fa fa-times"></i>关闭
    </button>
</div>
{% endblock %}